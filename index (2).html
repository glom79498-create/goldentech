<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GoldenTech — Black Friday</title>
  <meta name="description" content="GoldenTech Black Friday — laptops, teléfonos, audio. Envío gratis sobre $99.">
  <style>
    :root{
      --bg:#070607;
      --card:#0f0f0f;
      --muted:#bfb8a5;
      --gold:#d4af37;
      --accent:#ffcf66;
      --maxw:1200px;
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0; color:var(--muted); background:linear-gradient(180deg,#050505, #0c0c0c); -webkit-font-smoothing:antialiased;}
    .container{max-width:var(--maxw);margin:18px auto;padding:0 16px}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 0}
    .logo{font-weight:900;font-size:20px;color:var(--gold);letter-spacing:0.6px}
    .tag{font-size:13px;color:#9b8f74}
    .hero{background:linear-gradient(90deg, rgba(20,18,14,0.6), rgba(12,10,8,0.6)); padding:26px;border-radius:10px; margin-bottom:18px; border:1px solid rgba(212,175,55,0.08)}
    .hero h1{color:var(--gold);margin:0 0 6px;font-size:28px}
    .hero p{margin:0;color:#cfc6b0}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:12px;box-shadow:0 6px 20px rgba(0,0,0,0.6);border:1px solid rgba(212,175,55,0.04);display:flex;flex-direction:column}
    .card img{width:100%;height:160px;object-fit:cover;border-radius:6px;opacity:0.98}
    .title{font-weight:700;margin:8px 0 6px;color:#efe8d6}
    .price{font-weight:800;color:var(--gold);font-size:16px}
    .old{color:#6d6654;text-decoration:line-through;margin-left:8px;font-weight:600;font-size:13px}
    .actions{display:flex;gap:8px;align-items:center;margin-top:10px}
    .btn{background:var(--gold);color:#050505;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
    .secondary{background:transparent;color:var(--gold);padding:8px 12px;border-radius:8px;border:1px solid rgba(212,175,55,0.15);cursor:pointer}
    .cart-side{position:fixed;right:18px;top:80px;background:linear-gradient(180deg, #0b0b0b, #0a0a0a);padding:16px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.8);width:380px;max-width:92%;z-index:60;border:1px solid rgba(212,175,55,0.06)}
    .cart-list{max-height:420px;overflow:auto;margin-bottom:8px}
    .cart-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.02)}
    .qty-btn{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:6px 8px;border-radius:6px;color:var(--muted);cursor:pointer}
    footer{margin-top:24px;padding:18px 0;text-align:center;color:#8e8570}
    @media(max-width:1000px){.grid{grid-template-columns:repeat(2,1fr)} .cart-side{position:static;margin-top:16px;width:auto}}
    @media(max-width:600px){.grid{grid-template-columns:1fr} .cart-side{width:100%;position:static}}
    .small{font-size:13px;color:#9b8f74}
    .badge{background:rgba(212,175,55,0.12);color:var(--gold);padding:4px 8px;border-radius:999px;font-weight:700;font-size:12px}
    .summary-row{display:flex;justify-content:space-between;padding:6px 0;color:#efe8d6}
    .total-big{font-size:20px;color:var(--gold);font-weight:900}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <div class="logo">GoldenTech</div>
        <div class="tag">Black Friday — ofertas limitadas</div>
      </div>
      <div>
        <button class="secondary" onclick="scrollToGrid()">Ver productos</button>
      </div>
    </header>

    <section class="hero">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div>
          <h1>Black Friday · GoldenTech</h1>
          <p>Descuentos hasta 60% en laptops, teléfonos y audio. Envío gratis en pedidos mayores a $99.</p>
        </div>
        <div style="text-align:right">
          <div class="badge">Envío gratis > $99</div>
          <div style="margin-top:8px" class="small">Stock limitado — compra rápido</div>
        </div>
      </div>
    </section>

    <main id="products-grid" class="grid"></main>

    <footer>© <span id="year"></span> GoldenTech — soporte: soporte@goldentech.store</footer>
  </div>

  <!-- Cart -->
  <div class="cart-side" id="cart-side" role="region" aria-label="Carrito">
    <h4 style="color:var(--gold)">Carrito (<span id="cart-count">0</span>)</h4>
    <div class="cart-list" id="cart-list"></div>

    <div class="summary-row"><div>Subtotal</div><div>$<span id="subtotal">0.00</span></div></div>
    <div class="summary-row"><div>Tax/Fees (5%)</div><div>$<span id="tax">0.00</span></div></div>
    <div class="summary-row"><div>Envío</div><div id="shipping-txt">$<span id="shipping">0.00</span></div></div>
    <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:8px 0">
    <div class="summary-row" style="font-weight:800"><div>Total</div><div class="total-big">$<span id="total">0.00</span></div></div>
    <div style="display:flex;gap:8px;margin-top:12px">
      <button class="btn" onclick="checkout()">Finalizar compra</button>
      <button class="secondary" onclick="clearCart()">Vaciar</button>
    </div>
    <div style="margin-top:10px;font-size:12px;color:#9b8f74">Al pagar serás redirigido al formulario seguro para completar la compra.</div>
  </div>

<script>
  // 28 productos con consultas a Unsplash (source.unsplash.com)
  const products = [
    {id:1, category:'Laptops', title:'MacBook Air M2 (2024)', price:799, old:1199, query:'macbook+air'},
    {id:2, category:'Laptops', title:'Dell XPS 13 Plus', price:599, old:999, query:'dell+xps'},
    {id:3, category:'Laptops', title:'HP Envy 15 Ryzen 7', price:499, old:899, query:'hp+envy+laptop'},
    {id:4, category:'Laptops', title:'Lenovo ThinkPad X1 Carbon Gen 11', price:699, old:1299, query:'thinkpad+x1'},
    {id:5, category:'Laptops', title:'ASUS ROG Zephyrus G14', price:899, old:1499, query:'asus+rog+zephyrus'},
    {id:6, category:'Laptops', title:'Acer Swift 3 Intel EVO', price:329, old:699, query:'acer+swift+laptop'},
    {id:7, category:'Teléfonos', title:'iPhone 15 Pro Max (Refurb)', price:749, old:1199, query:'iphone+15'},
    {id:8, category:'Teléfonos', title:'Samsung Galaxy S23 Ultra', price:699, old:1099, query:'samsung+galaxy+s23'},
    {id:9, category:'Teléfonos', title:'Google Pixel 8a', price:399, old:699, query:'google+pixel'},
    {id:10, category:'Teléfonos', title:'OnePlus 12R 5G', price:299, old:599, query:'oneplus+phone'},
    {id:11, category:'Teléfonos', title:'Motorola Edge 40', price:199, old:499, query:'motorola+edge'},
    {id:12, category:'Teléfonos', title:'Nokia G310 5G', price:129, old:249, query:'nokia+phone'},
    {id:13, category:'Audio', title:'Apple AirPods Pro 2', price:129, old:249, query:'airpods'},
    {id:14, category:'Audio', title:'Sony WH-1000XM5', price:179, old:349, query:'sony+headphones'},
    {id:15, category:'Audio', title:'Bose QuietComfort Ultra', price:159, old:299, query:'bose+headphones'},
    {id:16, category:'Audio', title:'Jabra Elite 85t', price:89, old:179, query:'jabra+earbuds'},
    {id:17, category:'Audio', title:'Anker Soundcore Life Q30', price:49, old:99, query:'anker+headphones'},
    {id:18, category:'Audio', title:'Beats Studio Buds+', price:99, old:199, query:'beats+earbuds'},
    {id:19, category:'Smartwatches', title:'Apple Watch Series 9 GPS', price:299, old:499, query:'apple+watch'},
    {id:20, category:'Smartwatches', title:'Samsung Galaxy Watch 6 Classic', price:249, old:449, query:'samsung+watch'},
    {id:21, category:'Smartwatches', title:'Garmin Venu 3', price:279, old:499, query:'garmin+watch'},
    {id:22, category:'Smartwatches', title:'Fitbit Versa 4', price:159, old:299, query:'fitbit+versa'},
    {id:23, category:'Smartwatches', title:'Amazfit GTR 4', price:129, old:249, query:'amazfit+gtr'},
    {id:24, category:'Accesorios', title:'Logitech MX Master 3S Mouse', price:69, old:129, query:'logitech+mouse'},
    {id:25, category:'Accesorios', title:'Keychron K6 Wireless Keyboard', price:79, old:119, query:'mechanical+keyboard'},
    {id:26, category:'Accesorios', title:'Ugreen USB-C Hub 8-in-1', price:49, old:89, query:'usb+c+hub'},
    {id:27, category:'Accesorios', title:'SanDisk 1TB SSD Portable', price:89, old:179, query:'portable+ssd'},
    {id:28, category:'Accesorios', title:'Anker 20,000mAh Power Bank', price:59, old:99, query:'power+bank'}
  ];

  // build image urls, stock, links
  products.forEach((p,i) => {
    p.stock = Math.floor(Math.random()*80)+20;
    p.link = 'https://goldentech.store/product/' + encodeURIComponent(p.title.replace(/\s+/g,'_'));
    // Unsplash source (query). Using source.unsplash.com which returns a random image for query.
    p.img = 'https://source.unsplash.com/900x600/?' + encodeURIComponent(p.query);
  });

  const cart = {};

  function renderProducts() {
    const grid = document.getElementById('products-grid');
    grid.innerHTML = '';
    products.forEach(p => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${p.img}" alt="${p.title}" loading="lazy" onerror="this.onerror=null;this.src='https://picsum.photos/seed/${encodeURIComponent(p.title)}/600/400'">
        <div class="title">${p.title}</div>
        <div><span class="price">$${p.price.toFixed(2)}</span><span class="old">$${p.old.toFixed(2)}</span></div>
        <div class="small" style="margin-top:6px">Stock: ${p.stock}</div>
        <div style="margin-top:auto" class="actions">
          <div style="display:flex;gap:6px;align-items:center">
            <button class="qty-btn" onclick="decrease(${p.id})">-</button>
            <div id="qty-${p.id}" style="min-width:28px;text-align:center">0</div>
            <button class="qty-btn" onclick="increase(${p.id})">+</button>
          </div>
          <div style="margin-left:auto">
            <button class="btn" onclick="addToCart(${p.id})">Agregar</button>
          </div>
        </div>
      `;
      grid.appendChild(card);
    });
  }

  function increase(id){ const q = cart[id]||0; const prod = products.find(p=>p.id===id); if(q < prod.stock){ cart[id]=q+1; document.getElementById('qty-'+id).innerText = cart[id]; renderCart(); } else alert('Stock máximo alcanzado'); }
  function decrease(id){ const q = cart[id]||0; if(q>0){ cart[id]=q-1; if(cart[id]===0) delete cart[id]; document.getElementById('qty-'+id).innerText = cart[id]||0; renderCart(); } }
  function addToCart(id){ const q = cart[id]||0; const prod = products.find(p=>p.id===id); if(q>=prod.stock){ alert('No hay más stock'); return; } cart[id]=q+1; document.getElementById('qty-'+id).innerText = cart[id]; renderCart(); }

  function renderCart(){
    const list = document.getElementById('cart-list'); list.innerHTML='';
    let subtotal = 0; let count = 0;
    for(const id in cart){
      const qty = cart[id]; const p = products.find(x=>x.id==id);
      const row = document.createElement('div'); row.className='cart-item';
      row.innerHTML = `<div style="max-width:62%"><strong style="color:#efe8d6">${p.title}</strong><div class="small">x${qty} · $${p.price.toFixed(2)}</div></div>
                       <div style="text-align:right;color:#efe8d6">$${(p.price*qty).toFixed(2)}<div style="margin-top:6px"><button class="secondary" onclick="removeItem(${p.id})">Eliminar</button></div></div>`;
      list.appendChild(row);
      subtotal += p.price*qty; count += qty;
    }
    document.getElementById('cart-count').innerText = count; document.getElementById('subtotal').innerText = subtotal.toFixed(2);
    const tax = +(subtotal * 0.05).toFixed(2); document.getElementById('tax').innerText = tax.toFixed(2);
    const shipping = subtotal>99 ? 0 : (subtotal>0 ? 9.99 : 0); document.getElementById('shipping').innerText = shipping.toFixed(2);
    document.getElementById('shipping-txt').innerText = shipping===0 ? 'Gratis' : '$'+shipping.toFixed(2);
    const total = +(subtotal + tax + shipping).toFixed(2); document.getElementById('total').innerText = total.toFixed(2);
  }

  function removeItem(id){ delete cart[id]; document.getElementById('qty-'+id) && (document.getElementById('qty-'+id).innerText = 0); renderCart(); }
  function clearCart(){ for(const id in cart) delete cart[id]; products.forEach(p => document.getElementById('qty-'+p.id) && (document.getElementById('qty-'+p.id).innerText = 0)); renderCart(); }
  function scrollToGrid(){ document.getElementById('products-grid').scrollIntoView({behavior:'smooth'}); }

  // Checkout: redirige en misma ventana a JotForm con order_summary y total
  function checkout(){
    if(Object.keys(cart).length===0){ alert('El carrito está vacío'); return; }
    const lines = []; let subtotal=0;
    for(const id in cart){ const qty=cart[id]; const p = products.find(x=>x.id==id); lines.push(`${p.title} x${qty} -> $${(p.price*qty).toFixed(2)}`); subtotal += p.price*qty; }
    const tax = +(subtotal * 0.05).toFixed(2); const shipping = subtotal>99 ? 0 : 9.99; const total = (subtotal + tax + shipping).toFixed(2);
    const summaryText = lines.join(' | ');
    const baseForm = 'https://form.jotform.com/glom79498/-complete-your-purchase';
    const params = new URLSearchParams();
    params.set('order_summary', summaryText);
    params.set('total', total);
    window.location.href = baseForm + '?' + params.toString();
  }

  document.getElementById('year').innerText = new Date().getFullYear();
  renderProducts();
  renderCart();
</script>
</body>
</html>
